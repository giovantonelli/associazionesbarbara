<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Associazione Santa Barbara | Galleria</title>
<meta name="description" content="Galleria fotografica e video dell'Associazione Santa Barbara APS di Grumo Appula. Corteo Storico, eventi e attività dell'associazione.">
<meta name="keywords" content="Associazione Santa Barbara, Grumo Appula, galleria, foto, video, Corteo Storico, eventi, attività">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://associazionesbarbara.it/galleria.html">
<meta property="og:title" content="Galleria - Associazione Santa Barbara">
<meta property="og:description" content="Scopri le foto e i video delle nostre attività, eventi e del Corteo Storico">
<meta property="og:type" content="website">
<meta property="og:url" content="https://associazionesbarbara.it/galleria.html">
<meta property="og:image" content="logo.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Galleria - Associazione Santa Barbara">
<meta name="twitter:description" content="Scopri le foto e i video delle nostre attività, eventi e del Corteo Storico">
<meta name="twitter:image" content="logo.png">
<link rel="stylesheet" href="assets/css/style.css">
<link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/svg+xml" href="favicon.svg">
<link rel="shortcut icon" href="favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<meta name="apple-mobile-web-app-title" content="S.Barbara">
<link rel="manifest" href="site.webmanifest">
<meta name="msapplication-TileColor" content="#ff8200">
<meta name="msapplication-TileImage" content="favicon.ico">
<script src="assets/js/analytics.js"></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "name": "Associazione Santa Barbara",
  "image": "https://associazionesbarbara.it/logo.png",
  "logo": "https://associazionesbarbara.it/logo.png",
  "@id": "https://associazionesbarbara.it/",
  "url": "https://associazionesbarbara.it/",
  "telephone": "+39 333 289 3715",
  "email": "info@associazionesbarbara.it",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "Via Nicola Mastroserio 12",
    "addressLocality": "Grumo Appula",
    "addressRegion": "BA",
    "postalCode": "70025",
    "addressCountry": "IT"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": "41.011707",
    "longitude": "16.7079645"
  },
  "openingHours": [
    "Mo 08:00-13:00,17:00-20:00",
    "Tu 08:00-13:00,17:00-20:00",
    "We 08:00-13:00,17:00-20:00",
    "Th 08:00-13:00,17:00-20:00",
    "Fr 08:00-13:00,17:00-20:00",
    "Sa 08:00-13:00"
  ],
  "foundingDate": "2008",
  "inLanguage": "it",
  "sameAs": [
    "https://www.facebook.com/s.barbaragrumo",
    "https://www.instagram.com/corteostoricosantabarbara/"
  ],
  "description": "L'Associazione Santa Barbara, attiva dal 2008 a Grumo Appula (BA), promuove la cultura, le tradizioni popolari e la solidarietà attraverso eventi, attività sociali e iniziative educative rivolte alla comunità."
}
</script>
</head>
<body>
  <div id="cookie-banner" class="cookie-banner">
    <div class="cookie-content">
      <p>Questo sito utilizza cookie per migliorare la tua esperienza. Continuando la navigazione accetti l'uso dei cookie.</p>
      <div class="cookie-actions">
        <button id="cookie-accept" class="btn btn-primary">Accetta</button> <button id="cookie-decline" class="btn btn-secondary">Rifiuta</button> <a href="privacy.html" class="btn btn-link">Informativa Privacy</a>
      </div>
    </div>
  </div>
  <nav class="navbar">
    <div class="container">
      <div class="nav-brand">
        <a href="index.html" class="nav-brand-link"><img src="logo.png" alt="Logo Associazione Santa Barbara" class="logo"> <span class="brand-text">Associazione Santa Barbara</span></a>
      </div>
      <button class="nav-toggle" aria-label="Toggle navigation">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <ul class="nav-menu">
        <li>
          <a href="index.html" class="nav-link">Home</a>
        </li>
        <li>
          <a href="chi-siamo.html" class="nav-link">Chi siamo</a>
        </li>
        <li>
          <a href="attivita.html" class="nav-link">Attività</a>
        </li>
        <li>
          <a href="eventi.html" class="nav-link">Eventi</a>
        </li>
        <li>
          <a href="galleria.html" class="nav-link active">Galleria</a>
        </li>
        <li>
          <a href="faq.html" class="nav-link">FAQ</a>
        </li>
        <li>
          <a href="contatti.html" class="nav-link">Contatti</a>
        </li>
        <li>
          <a href="partner.html" class="nav-link">Partner</a>
        </li>
        <li>
          <a href="area-soci.html" class="nav-link btn btn-primary">Area Soci</a>
        </li>
      </ul>
    </div>
  </nav>
  <div id="user-bar"></div>

  <!-- Hero Section -->
  <section class="hero chi-siamo-hero">
    <div class="container">
      <div class="hero-content animate-fade-in">
        <h1 class="hero-title">Galleria</h1>
        <p class="lead">I momenti più belli delle nostre attività e eventi</p>
      </div>
    </div>
  </section>

  <!-- Galleria Foto Section -->
  <section class="gallery-section animate-section">
    <div class="container">
      <div class="section-header text-center">
        <span class="section-badge">Foto</span>
        <h2>Le nostre foto</h2>
        <p class="section-intro">Sfoglia la collezione delle nostre migliori immagini</p>
      </div>
      
      <div class="gallery-slider-container">
        <div class="swiper photos-swiper">
          <div class="swiper-wrapper" id="photos-container">
            <!-- Le foto verranno caricate dinamicamente da Supabase -->
            <div class="swiper-slide">
              <div class="gallery-item loading-placeholder">
                <div class="loading-spinner"></div>
                <p>Caricamento foto...</p>
              </div>
            </div>
          </div>
          <div class="swiper-pagination"></div>
          <div class="swiper-button-next"></div>
          <div class="swiper-button-prev"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Galleria Video Section -->
  <section class="gallery-section video-section animate-section">
    <div class="container">
      <div class="section-header text-center">
        <span class="section-badge">Video</span>
        <h2>I nostri video</h2>
        <p class="section-intro">Rivivi i momenti più emozionanti dei nostri eventi</p>
      </div>
      
      <div class="gallery-slider-container">
        <div class="swiper videos-swiper">
          <div class="swiper-wrapper" id="videos-container">
            <!-- I video verranno caricati dinamicamente da Supabase -->
            <div class="swiper-slide">
              <div class="gallery-item loading-placeholder">
                <div class="loading-spinner"></div>
                <p>Caricamento video...</p>
              </div>
            </div>
          </div>
          <div class="swiper-pagination"></div>
          <div class="swiper-button-next"></div>
          <div class="swiper-button-prev"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Modal per visualizzazione ingrandita -->
  <div id="gallery-modal" class="gallery-modal">
    <span class="gallery-modal-close">&times;</span>
    <div class="gallery-modal-content">
      <img id="modal-image" src="" alt="">
      <video id="modal-video" controls style="display: none;">
        <source src="" type="video/mp4">
        Il tuo browser non supporta il tag video.
      </video>
    </div>
    <div class="gallery-modal-nav">
      <button id="modal-prev" class="modal-nav-btn">&#10094;</button>
      <button id="modal-next" class="modal-nav-btn">&#10095;</button>
    </div>
  </div>
  <!-- Footer -->
  <footer class="footer enhanced-footer">
    <div class="container">
      <div class="footer-main">
        <div class="footer-brand brand-card">
          <img src="logo.png" alt="Associazione Santa Barbara" class="footer-logo">
          <h4>Associazione Santa Barbara</h4>
          <p>
            Preserviamo le tradizioni di Grumo Appula dal 2008 con il Corteo Storico e attività culturali che valorizzano il nostro patrimonio.
          </p>
          <div class="contact-info-footer">
            <p>
              <span>📍</span> Via N. Mastroserio 12 - Grumo Appula (BA)
            </p>
            <p>
              <span>📧</span> <a href="mailto:info@associazionesbarbara.it">info@associazionesbarbara.it</a>
            </p>
            <p>
              <b>Contattaci per maggiori informazioni</b>
            </p>
          </div>
        </div>

        <div class="footer-sections">
          <div class="footer-section links-card">
            <div>
              <h4>🔗 Link Utili</h4>
              <ul>
                <li>
                  <a href="chi-siamo.html">
                    <span>▶</span> Chi siamo
                  </a>
                </li>
                <li>
                  <a href="eventi.html">
                    <span>▶</span> Eventi
                  </a>
                </li>
                <li>
                  <a href="galleria.html">
                    <span>▶</span> Galleria
                  </a>
                </li>
                <li>
                  <a href="attivita.html">
                    <span>▶</span> Attività
                  </a>
                </li>
                <li>
                  <a href="faq.html">
                    <span>▶</span> FAQ
                  </a>
                </li>
              </ul>
            </div>
            
            <div class="social-section">
              <p>🌐 Seguici sui social:</p>
              <div class="social-links">
                <a href="https://www.facebook.com/s.barbaragrumo" class="enhanced-social" rel="nofollow" aria-label="Facebook">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="currentcolor">
                    <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path>
                  </svg>
                </a>
                <a href="https://www.instagram.com/corteostoricosantabarbara/" class="enhanced-social" rel="nofollow" aria-label="Instagram">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="currentcolor">
                    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.40s-.644-1.44-1.439-1.40z"></path>
                  </svg>
                </a>
                <a href="https://t.me/associazionesbarbara" class="enhanced-social" rel="nofollow" aria-label="Telegram">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="currentcolor">
                    <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"></path>
                  </svg>
                </a>
              </div>
              <div class="secondary-links">
                <a href="privacy.html">Privacy</a>
                <a href="partner.html">Partner</a>
                <a href="area-soci.html">Area Soci</a>
              </div>
            </div>
          </div>

          <div class="footer-section support-section">
            <h4>🤝 Sostieni l'Associazione</h4>
            <p>
              Aiutaci a preservare le tradizioni e organizzare eventi per la comunità. Il tuo supporto è fondamentale per mantenere viva la storia e la cultura di Grumo Appula.
            </p>
            <p>
              Con il tuo contributo possiamo continuare a organizzare il Corteo Storico, eventi culturali, iniziative educative e progetti per valorizzare il nostro patrimonio storico-artistico.
            </p>
            <p>
              <strong>Ogni donazione, grande o piccola, fa la differenza!</strong> Insieme possiamo costruire un futuro migliore per la nostra comunità.
            </p>
            <div class="sponsor-btn-container">
              <a href="contatti.html" class="sponsor-btn">
                ❤️ Diventa Sponsor
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        <p>&copy; 2008 - <span id="current-year"></span> Associazione Santa Barbara APS. Tutti i diritti riservati.<br>
        <span class="privacy-links"><a href="privacy.html">PRIVACY POLICY</a> <span class="separator">|</span> <a href="#" onclick="window.cookieConsent && window.cookieConsent.open(); return false;">GESTISCI COOKIE</a></span></p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="assets/js/notifications.js"></script> 
  <script src="assets/js/script.js"></script> 
  <script src="assets/js/adblock-detector-v2.js"></script> 
  <script src="assets/js/adblock-integration-v2.js"></script>
  <script src="assets/js/swiper-bundle.min.js"></script>
  
  <!-- Script specifico per la galleria -->
  <script>
    // Configurazione Supabase
    const SUPABASE_URL = 'https://ciezrbsolxpjxswdkkpo.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNpZXpyYnNvbHhwanhzd2Rra3BvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI5MjM1NjAsImV4cCI6MjA2ODQ5OTU2MH0.V-U8KhO8byObUW5kJ8XbLBkp9O9Efh98MdbKYFfbQJk';
    
    let photosSwiper, videosSwiper;
    let allPhotos = [], allVideos = [];
    let currentModalIndex = 0;
    let currentModalType = 'photo'; // 'photo' o 'video'

    // Inizializza la pagina
    document.addEventListener('DOMContentLoaded', function() {
      initializeGallery();
      initializeModal();
    });

    // Inizializza la galleria
    async function initializeGallery() {
      try {
        // Carica foto e video da Supabase (da implementare)
        await loadPhotosFromSupabase();
        await loadVideosFromSupabase();
        
        // Inizializza gli slider
        initializePhotoSwiper();
        initializeVideoSwiper();
        
      } catch (error) {
        console.error('Errore durante il caricamento della galleria:', error);
        showErrorMessage();
      }
    }

    // Carica le foto da Supabase
    async function loadPhotosFromSupabase() {
      try {
        const response = await fetch(`${SUPABASE_URL}/rest/v1/gallery_photos?select=*&order=created_at.desc`, {
          headers: {
            'apikey': SUPABASE_ANON_KEY,
            'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
            'Content-Type': 'application/json'
          }
        });
        
        if (response.ok) {
          const photos = await response.json();
          allPhotos = photos.map(photo => ({
            id: photo.id,
            url: `${SUPABASE_URL}/storage/v1/object/public/gallery/${photo.file_path}`,
            title: photo.title || 'Foto',
            description: photo.description || 'Una foto della nostra galleria'
          }));
          renderPhotos(allPhotos);
        } else {
          // Fallback con foto di esempio se la tabella non esiste ancora
          const fallbackPhotos = [
            { id: 1, url: 'https://ciezrbsolxpjxswdkkpo.supabase.co/storage/v1/object/public/gallery/html/corteostorico.jpg', title: 'Corteo Storico 2024', description: 'Una foto del nostro Corteo Storico' },
            { id: 2, url: 'https://ciezrbsolxpjxswdkkpo.supabase.co/storage/v1/object/public/gallery/html/tamburini.jpg', title: 'Tamburi Medievali', description: 'Il gruppo dei Tamburi Medievali in azione' },
            { id: 3, url: 'https://ciezrbsolxpjxswdkkpo.supabase.co/storage/v1/object/public/gallery/html/banner.jpg', title: 'Evento culturale', description: 'Un momento del nostro evento culturale' }
          ];
          allPhotos = fallbackPhotos;
          renderPhotos(allPhotos);
        }
        
      } catch (error) {
        console.error('Errore nel caricamento delle foto:', error);
        // Fallback con foto di esempio
        const fallbackPhotos = [
          { id: 1, url: 'https://ciezrbsolxpjxswdkkpo.supabase.co/storage/v1/object/public/gallery/html/corteostorico.jpg', title: 'Corteo Storico 2024', description: 'Una foto del nostro Corteo Storico' },
          { id: 2, url: 'https://ciezrbsolxpjxswdkkpo.supabase.co/storage/v1/object/public/gallery/html/tamburini.jpg', title: 'Tamburi Medievali', description: 'Il gruppo dei Tamburi Medievali in azione' },
          { id: 3, url: 'https://ciezrbsolxpjxswdkkpo.supabase.co/storage/v1/object/public/gallery/html/banner.jpg', title: 'Evento culturale', description: 'Un momento del nostro evento culturale' }
        ];
        allPhotos = fallbackPhotos;
        renderPhotos(allPhotos);
      }
    }

    // Carica i video da Supabase
    async function loadVideosFromSupabase() {
      try {
        const response = await fetch(`${SUPABASE_URL}/rest/v1/gallery_videos?select=*&order=created_at.desc`, {
          headers: {
            'apikey': SUPABASE_ANON_KEY,
            'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
            'Content-Type': 'application/json'
          }
        });
        
        if (response.ok) {
          const videos = await response.json();
          allVideos = videos.map(video => ({
            id: video.id,
            url: `${SUPABASE_URL}/storage/v1/object/public/gallery/${video.file_path}`,
            thumbnail: video.thumbnail_path ? `${SUPABASE_URL}/storage/v1/object/public/gallery/${video.thumbnail_path}` : 'https://via.placeholder.com/800x450?text=Video',
            title: video.title || 'Video',
            description: video.description || 'Un video della nostra galleria'
          }));
          renderVideos(allVideos);
        } else {
          // Fallback con video di esempio se la tabella non esiste ancora
          const fallbackVideos = [
            { id: 1, url: 'https://www.w3schools.com/html/mov_bbb.mp4', thumbnail: 'https://via.placeholder.com/800x450?text=Video+Corteo+2024', title: 'Video Corteo 2024', description: 'Highlights del Corteo Storico 2024' },
            { id: 2, url: 'https://www.w3schools.com/html/movie.mp4', thumbnail: 'https://via.placeholder.com/800x450?text=Video+Tamburi', title: 'Video Tamburi', description: 'Esibizione dei Tamburi Medievali' }
          ];
          allVideos = fallbackVideos;
          renderVideos(allVideos);
        }
        
      } catch (error) {
        console.error('Errore nel caricamento dei video:', error);
        // Fallback con video di esempio
        const fallbackVideos = [
          { id: 1, url: 'https://www.w3schools.com/html/mov_bbb.mp4', thumbnail: 'https://via.placeholder.com/800x450?text=Video+Corteo+2024', title: 'Video Corteo 2024', description: 'Highlights del Corteo Storico 2024' },
          { id: 2, url: 'https://www.w3schools.com/html/movie.mp4', thumbnail: 'https://via.placeholder.com/800x450?text=Video+Tamburi', title: 'Video Tamburi', description: 'Esibizione dei Tamburi Medievali' }
        ];
        allVideos = fallbackVideos;
        renderVideos(allVideos);
      }
    }

    // Renderizza le foto nello slider
    function renderPhotos(photos) {
      const container = document.getElementById('photos-container');
      
      if (photos.length === 0) {
        container.innerHTML = '<div class="swiper-slide"><div class="gallery-item no-content"><p>Nessuna foto disponibile</p></div></div>';
        return;
      }
      
      container.innerHTML = photos.map((photo, index) => `
        <div class="swiper-slide">
          <div class="gallery-item" onclick="openModal('photo', ${index})">
            <img src="${photo.url}" alt="${photo.title}" loading="lazy">
            <div class="gallery-overlay">
              <h3>${photo.title}</h3>
              <p>${photo.description}</p>
            </div>
          </div>
        </div>
      `).join('');
    }

    // Renderizza i video nello slider
    function renderVideos(videos) {
      const container = document.getElementById('videos-container');
      
      if (videos.length === 0) {
        container.innerHTML = '<div class="swiper-slide"><div class="gallery-item no-content"><p>Nessun video disponibile</p></div></div>';
        return;
      }
      
      container.innerHTML = videos.map((video, index) => `
        <div class="swiper-slide">
          <div class="gallery-item video-item" onclick="openModal('video', ${index})">
            <img src="${video.thumbnail}" alt="${video.title}" loading="lazy">
            <div class="play-button">▶</div>
            <div class="gallery-overlay">
              <h3>${video.title}</h3>
              <p>${video.description}</p>
            </div>
          </div>
        </div>
      `).join('');
    }

    // Inizializza lo slider delle foto
    function initializePhotoSwiper() {
      photosSwiper = new Swiper('.photos-swiper', {
        slidesPerView: 1,
        spaceBetween: 30,
        loop: true,
        pagination: {
          el: '.photos-swiper .swiper-pagination',
          clickable: true,
        },
        navigation: {
          nextEl: '.photos-swiper .swiper-button-next',
          prevEl: '.photos-swiper .swiper-button-prev',
        },
        breakpoints: {
          640: {
            slidesPerView: 2,
          },
          1024: {
            slidesPerView: 3,
          },
        },
        autoplay: {
          delay: 5000,
          disableOnInteraction: false,
        },
      });
    }

    // Inizializza lo slider dei video
    function initializeVideoSwiper() {
      videosSwiper = new Swiper('.videos-swiper', {
        slidesPerView: 1,
        spaceBetween: 30,
        loop: true,
        pagination: {
          el: '.videos-swiper .swiper-pagination',
          clickable: true,
        },
        navigation: {
          nextEl: '.videos-swiper .swiper-button-next',
          prevEl: '.videos-swiper .swiper-button-prev',
        },
        breakpoints: {
          640: {
            slidesPerView: 2,
          },
          1024: {
            slidesPerView: 2,
          },
        },
        autoplay: {
          delay: 6000,
          disableOnInteraction: false,
        },
      });
    }

    // Inizializza il modal
    function initializeModal() {
      const modal = document.getElementById('gallery-modal');
      const closeBtn = document.querySelector('.gallery-modal-close');
      const prevBtn = document.getElementById('modal-prev');
      const nextBtn = document.getElementById('modal-next');

      closeBtn.onclick = closeModal;
      prevBtn.onclick = showPrevious;
      nextBtn.onclick = showNext;

      // Chiudi modal cliccando fuori
      window.onclick = function(event) {
        if (event.target === modal) {
          closeModal();
        }
      };

      // Navigazione con tastiera
      document.addEventListener('keydown', function(e) {
        if (modal.style.display === 'block') {
          if (e.key === 'Escape') closeModal();
          if (e.key === 'ArrowLeft') showPrevious();
          if (e.key === 'ArrowRight') showNext();
        }
      });
    }

    // Apri modal
    function openModal(type, index) {
      const modal = document.getElementById('gallery-modal');
      const modalImage = document.getElementById('modal-image');
      const modalVideo = document.getElementById('modal-video');
      
      currentModalType = type;
      currentModalIndex = index;
      
      if (type === 'photo') {
        const photo = allPhotos[index];
        modalImage.src = photo.url;
        modalImage.alt = photo.title;
        modalImage.style.display = 'block';
        modalVideo.style.display = 'none';
      } else {
        const video = allVideos[index];
        modalVideo.src = video.url;
        modalVideo.style.display = 'block';
        modalImage.style.display = 'none';
      }
      
      modal.style.display = 'block';
      document.body.style.overflow = 'hidden';
    }

    // Chiudi modal
    function closeModal() {
      const modal = document.getElementById('gallery-modal');
      const modalVideo = document.getElementById('modal-video');
      
      modal.style.display = 'none';
      document.body.style.overflow = 'auto';
      
      // Pausa video se aperto
      if (modalVideo.style.display === 'block') {
        modalVideo.pause();
      }
    }

    // Mostra precedente
    function showPrevious() {
      const currentArray = currentModalType === 'photo' ? allPhotos : allVideos;
      currentModalIndex = (currentModalIndex - 1 + currentArray.length) % currentArray.length;
      openModal(currentModalType, currentModalIndex);
    }

    // Mostra successivo
    function showNext() {
      const currentArray = currentModalType === 'photo' ? allPhotos : allVideos;
      currentModalIndex = (currentModalIndex + 1) % currentArray.length;
      openModal(currentModalType, currentModalIndex);
    }

    // Mostra messaggio di errore
    function showErrorMessage() {
      const photoContainer = document.getElementById('photos-container');
      const videoContainer = document.getElementById('videos-container');
      
      const errorMessage = '<div class="swiper-slide"><div class="gallery-item error-message"><p>⚠️ Errore nel caricamento del contenuto</p></div></div>';
      
      photoContainer.innerHTML = errorMessage;
      videoContainer.innerHTML = errorMessage;
    }

    // Aggiorna anno corrente nel footer
    document.getElementById('current-year').textContent = new Date().getFullYear();
  </script>

  <style>
    /* Stili specifici per la galleria */
    .gallery-section {
      padding: 80px 0;
      background: var(--background-light, #f8f9fa);
    }

    .video-section {
      background: white;
    }

    .gallery-slider-container {
      margin-top: 50px;
    }

    .gallery-item {
      position: relative;
      border-radius: 12px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s ease;
      background: white;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    .gallery-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .gallery-item img {
      width: 100%;
      height: 250px;
      object-fit: cover;
      transition: transform 0.3s ease;
    }

    .gallery-item:hover img {
      transform: scale(1.05);
    }

    .gallery-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(0,0,0,0.8));
      color: white;
      padding: 30px 20px 20px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    .gallery-item:hover .gallery-overlay {
      transform: translateY(0);
    }

    .gallery-overlay h3 {
      margin: 0 0 5px 0;
      font-size: 1.1rem;
      font-weight: 600;
    }

    .gallery-overlay p {
      margin: 0;
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .video-item .play-button {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60px;
      height: 60px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      color: var(--primary-color, #e10600);
      transition: all 0.3s ease;
    }

    .video-item:hover .play-button {
      background: white;
      transform: translate(-50%, -50%) scale(1.1);
    }

    .loading-placeholder {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 250px;
      background: #f8f9fa;
      color: #6c757d;
    }

    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid var(--primary-color, #e10600);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 15px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .no-content, .error-message {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 250px;
      background: #f8f9fa;
      color: #6c757d;
      text-align: center;
    }

    .error-message {
      color: #dc3545;
    }

    /* Modal Styles */
    .gallery-modal {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.9);
    }

    .gallery-modal-content {
      position: relative;
      margin: auto;
      padding: 0;
      width: 90%;
      max-width: 1200px;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .gallery-modal-content img,
    .gallery-modal-content video {
      max-width: 100%;
      max-height: 90vh;
      object-fit: contain;
    }

    .gallery-modal-close {
      position: absolute;
      top: 20px;
      right: 35px;
      color: white;
      font-size: 40px;
      font-weight: bold;
      cursor: pointer;
      z-index: 10001;
    }

    .gallery-modal-close:hover {
      opacity: 0.7;
    }

    .gallery-modal-nav {
      position: absolute;
      top: 50%;
      width: 100%;
      display: flex;
      justify-content: space-between;
      padding: 0 20px;
      z-index: 10001;
    }

    .modal-nav-btn {
      background: rgba(255,255,255,0.8);
      border: none;
      color: black;
      font-size: 18px;
      font-weight: bold;
      padding: 16px;
      cursor: pointer;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .modal-nav-btn:hover {
      background: white;
      transform: scale(1.1);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .gallery-section {
        padding: 60px 0;
      }
      
      .gallery-item img {
        height: 200px;
      }
      
      .gallery-modal-content {
        width: 95%;
      }
      
      .gallery-modal-close {
        top: 10px;
        right: 20px;
        font-size: 30px;
      }
      
      .modal-nav-btn {
        width: 40px;
        height: 40px;
        font-size: 14px;
      }
    }
  </style>
</body>
</html>
