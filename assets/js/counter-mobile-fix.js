function fixMobileCounters(){function t(t,e,o=2e3){let n=e/(o/16),i=0,a=setInterval(()=>{(i+=n)>=e?(t.textContent=e+(e>=100?"+":""),clearInterval(a)):t.textContent=Math.floor(i)},16)}let e=new IntersectionObserver(o=>{o.forEach(o=>{if(o.isIntersecting&&o.intersectionRatio>=.1){let n=o.target.querySelectorAll(".counter");n.forEach((e,o)=>{let n=parseInt(e.dataset.target)||0;setTimeout(()=>{t(e,n)},200*o)}),e.unobserve(o.target)}})},{threshold:[.1,.3,.5],rootMargin:"0px 0px -20px 0px"}),o=document.querySelector(".stats-section");o?(e.observe(o),setTimeout(()=>{let e=o.querySelectorAll(".counter");e.forEach(e=>{if("0"===e.textContent||""===e.textContent){let o=parseInt(e.dataset.target)||0;t(e,o)}})},5e3)):void 0}async function fixDynamicCounters(){try{let t=window.location.pathname.split("/").pop()||"index.html";if(!("index.html"===t||"chi-siamo.html"===t))return;let e=document.getElementById("eventi-counter");if(e&&"0"===e.dataset.target){try{let o=await getEventsCount();e.dataset.target=o}catch(n){e.dataset.target="15"}}let i=document.getElementById("anni-counter");if(i&&"0"===i.dataset.target){let a=new Date().getFullYear(),r=a-2008;i.dataset.target=r}let l=document.getElementById("progetti-counter");if(l&&"0"===l.dataset.target){try{let u=await getAttivitaCount();l.dataset.target=u}catch(c){l.dataset.target="8"}}}catch(s){}}function addMobileCounterEnhancements(){if("ontouchstart"in window){let t=document.querySelector(".stats-section");if(t){t.classList.add("mobile-counters");let e=`<style id="mobile-counter-css">@media (max-width: 768px) {.stats-section.mobile-counters {padding: 40px 0 !important;min-height: auto !important;}.enhanced-stat {margin-bottom: 20px !important;padding: 20px !important;}.stat-number {font-size: 2.5rem !important;font-weight: 700 !important;color: #FFD700 !important;}.mobile-counters .counter {animation: mobileCounterPulse 2s ease-in-out !important;}@keyframes mobileCounterPulse {0% { transform: scale(1); }50% { transform: scale(1.05); }100% { transform: scale(1); }}}</style>`;document.getElementById("mobile-counter-css")||document.head.insertAdjacentHTML("beforeend",e)}}}function initMobileCounterFix(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{setTimeout(async()=>{await fixDynamicCounters(),fixMobileCounters(),addMobileCounterEnhancements()},100)}):setTimeout(async()=>{await fixDynamicCounters(),fixMobileCounters(),addMobileCounterEnhancements()},100)}"undefined"==typeof getEventsCount&&(window.getEventsCount=async function(){return 15}),"undefined"==typeof getAttivitaCount&&(window.getAttivitaCount=async function(){return 8}),window.testMobileCounters=function(){let t=document.querySelectorAll(".counter");fixMobileCounters()},initMobileCounterFix();