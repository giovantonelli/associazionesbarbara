class ImageSEOOptimizer{constructor(){this.optimizedImages=0,this.processedImages=0}optimizeImage(t,e=""){let i=t.getAttribute("alt")||"",a=t.src||t.getAttribute("src")||"",r=a.split("/").pop().split(".")[0];if(!i||""===i.trim()||i===r){let s=this.generateDescriptiveAlt(t,e,r);s&&(t.setAttribute("alt",s),this.optimizedImages++,console.log(`üñºÔ∏è [Image SEO] Alt text ottimizzato: "${s}"`))}if(!t.hasAttribute("loading")){let o=t.getBoundingClientRect().top<window.innerHeight;t.setAttribute("loading",o?"eager":"lazy")}!t.hasAttribute("width")&&!t.hasAttribute("height")&&t.naturalWidth&&t.naturalHeight&&(t.setAttribute("width",t.naturalWidth),t.setAttribute("height",t.naturalHeight)),this.processedImages++}generateDescriptiveAlt(t,e,i){let a=t.closest("div, section, article")?.className||"",r=this.getNearbyText(t);for(let[s,o]of Object.entries({logo:"Logo Associazione Santa Barbara",hero:"Banner principale Associazione Santa Barbara",evento:"Evento culturale dell'Associazione Santa Barbara",galleria:"Fotografia delle attivit\xe0 dell'Associazione Santa Barbara",team:"Membro del team Associazione Santa Barbara",attivita:"Attivit\xe0 e progetti dell'Associazione Santa Barbara",corteo:"Corteo storico di Santa Barbara a Grumo Appula",tradizione:"Tradizioni e cultura di Grumo Appula",volontariato:"Attivit\xe0 di volontariato dell'Associazione Santa Barbara"}))if(i.toLowerCase().includes(s)||a.toLowerCase().includes(s)||e.toLowerCase().includes(s))return o;return r?`Immagine: ${r}`:"Immagine dell'Associazione Santa Barbara - Cultura e tradizioni"}getNearbyText(t){let e=t.closest("figure, div, section, article");if(e){let i=e.querySelector("figcaption, .caption, .description");if(i&&i.textContent.trim())return i.textContent.trim().substring(0,100);let a=e.querySelector("h1, h2, h3, h4, h5, h6");if(a&&a.textContent.trim())return a.textContent.trim().substring(0,50)}return null}addImageStructuredData(){let t=document.querySelectorAll('.gallery img, .galleria img, [class*="photo"] img');if(t.length>0){let e={"@context":"https://schema.org","@type":"ImageGallery",name:"Galleria Associazione Santa Barbara",description:"Foto e immagini delle attivit\xe0 e eventi dell'Associazione Santa Barbara",publisher:{"@type":"Organization",name:"Associazione Santa Barbara",url:"https://associazionesbarbara.it"},image:[]};if(t.forEach((t,i)=>{if(i<20){let a=t.getAttribute("alt")||"",r=t.src||t.getAttribute("src")||"";r&&a&&e.image.push({"@type":"ImageObject",url:r.startsWith("http")?r:`https://associazionesbarbara.it${r}`,description:a,name:a})}}),e.image.length>0){let i=document.createElement("script");i.type="application/ld+json",i.textContent=JSON.stringify(e,null,2),document.head.appendChild(i),console.log(`üìä [Image SEO] Structured data aggiunto per ${e.image.length} immagini`)}}}optimizeResponsiveImages(){let t=document.querySelectorAll("img");t.forEach(t=>{!t.hasAttribute("sizes")&&t.hasAttribute("srcset")&&t.setAttribute("sizes","(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw"),!t.hasAttribute("srcset")&&t.src&&console.log(`üí° [Image SEO] Considera di aggiungere srcset per: ${t.src}`)})}fixCommonImageIssues(){let t=document.querySelectorAll("img");t.forEach(t=>{if(!t.src&&!t.getAttribute("src")){console.warn("‚ö†Ô∏è [Image SEO] Immagine senza src trovata:",t),t.style.display="none";return}if(!t.style.aspectRatio&&t.naturalWidth&&t.naturalHeight){let e=t.naturalWidth/t.naturalHeight;t.style.aspectRatio=e.toFixed(2)}if(t.addEventListener("error",function(){console.warn("‚ùå [Image SEO] Errore caricamento:",this.src),this.style.display="none"}),t.getAttribute("alt")&&t.closest("a")){let i=t.closest("a");i.getAttribute("aria-label")||i.textContent.trim()||i.setAttribute("aria-label",t.getAttribute("alt"))}})}runAllOptimizations(){console.log("\uD83D\uDDBCÔ∏è [Image SEO] Avvio ottimizzazioni immagini...");let t=document.querySelectorAll("img");t.forEach((t,e)=>{let i=this.getImageContext(t);this.optimizeImage(t,i)}),this.addImageStructuredData(),this.optimizeResponsiveImages(),this.fixCommonImageIssues(),setTimeout(()=>{console.log(`üìä [Image SEO] Ottimizzazioni completate:`),console.log(`  üì∑ ${this.processedImages} immagini processate`),console.log(`  ‚úÖ ${this.optimizedImages} alt text ottimizzati`),console.log(`  üìã Structured data per gallerie aggiunto`)},100)}getImageContext(t){let e=t.closest("section, article, main");if(e){let i=e.querySelector("h1, h2, h3");if(i)return i.textContent.trim()}return""}generateImageReport(){let t=document.querySelectorAll("img"),e={total:t.length,withAlt:0,withLoading:0,withDimensions:0,responsive:0,issues:[]};return t.forEach(t=>{t.getAttribute("alt")&&e.withAlt++,t.hasAttribute("loading")&&e.withLoading++,(t.hasAttribute("width")||t.hasAttribute("height"))&&e.withDimensions++,t.hasAttribute("srcset")&&e.responsive++,t.getAttribute("alt")||e.issues.push(`Alt text mancante: ${t.src}`)}),console.log("\uD83D\uDCCA [Image SEO] Report immagini:",e),e}}function initImageSEOOptimizations(){let t=new ImageSEOOptimizer;return t.runAllOptimizations(),t}"undefined"!=typeof window&&(window.ImageSEOOptimizer=ImageSEOOptimizer,window.optimizeImages=initImageSEOOptimizations),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{setTimeout(initImageSEOOptimizations,1500)}):setTimeout(initImageSEOOptimizations,1500),console.log("\uD83D\uDDBCÔ∏è [Image SEO] Sistema di ottimizzazione immagini caricato!"),"undefined"!=typeof module&&module.exports&&(module.exports=ImageSEOOptimizer);